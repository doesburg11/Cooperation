# Altruism Model (Python)

A faithful, vectorized Python/NumPy port of a NetLogo patch-based altruism simulation. Includes a Pygame UI for interactive exploration and Matplotlib plotting for population dynamics.

## Features
- **Patch-based grid model**: Each cell can be empty (black), selfish (green), or altruist (pink)
- **Altruism dynamics**: Simulates benefit/cost of altruism, fitness, and generational updates
- **Fully vectorized**: Efficient NumPy implementation for fast simulation
- **Pygame UI**: Visualize and interact with the model in real time
- **Matplotlib plots**: Track population changes over time

## Files
- `altruism_model.py`: Core simulation logic (importable class, CLI demo, and plotting)
- `altruism_pygame_ui.py`: Pygame-based interactive UI
- `pop_plot.png`: Example output plot (generated by UI)

## Usage
### Run the Model (CLI)
```bash
python altruism_model.py --steps 200 --width 101 --height 101 --seed 42
```

### Run the Pygame UI
```bash
python altruism_pygame_ui.py
```
- Controls:
  - `SPACE`: Start/Stop simulation
  - `R`: Reset
  - `S`: Step
  - `P`: Plot population history

### Import as a Module
```python
from altruism_model import AltruismModel, Params
model = AltruismModel(Params(width=51, height=51))
```

## Requirements
- Python 3.8+
- numpy
- pygame (for UI)
- matplotlib (for plotting)

Install dependencies:
```bash
pip install numpy pygame matplotlib
```
Install the additional system dependency for Pygame visualization:
```bash
conda install -y -c conda-forge gcc=14.2.0
```
## Model Parameters
- `altruistic_probability`: Initial chance a patch is altruist
- `selfish_probability`: Initial chance a patch is selfish
- `benefit_from_altruism`: Benefit received from altruists
- `cost_of_altruism`: Cost paid by altruists
- `disease`, `harshness`: Optional environment effects

## References
- [Original NetLogo model](https://www.netlogoweb.org/launch#https://www.netlogoweb.org/assets/modelslib/Curricular%20Models/BEAGLE%20Evolution/EACH/Altruism.nlogox) 
- http://ccl.northwestern.edu/rp/beagle/index.shtml
- 
---
 ## What is it?

This is an evolutionary biology model. It models population genetics with respect to the fitness of traits that are affected by social and environmental conditions. The model has two types of patch agents: altruistic agents and selfish agents.

The basic premise of the model is that the selfish agents and the altruistic agents are competing for each spot in the world by entering into a genetic lottery. You can imagine these agents as plants who "seed" for a spot, and the dominant seed generally wins. The details of the lottery are explained below in HOW IT WORKS.

Under normal (non-interfering) environmental conditions, the selfish agents win, and the altruistic population is driven to extinction. However, as outlined in HOW TO USE IT, when the environmental conditions are made more harsh, the altruistic population is able to survive, and even dominate the selfish population.

This model (and Cooperation and Divide the Cake) are part of the EACH unit ("Evolution of Altruistic and Cooperative Habits: Learning About Complexity in Evolution"). See http://ccl.northwestern.edu/rp/each/index.shtml for more information on the EACH unit. The EACH unit is embedded within the BEAGLE (Biological Experiments in Adaptation, Genetics, Learning and Evolution) evolution curriculum. See http://ccl.northwestern.edu/rp/beagle/index.shtml.

## How it works

1. Patches live in five-cell, plus-sign-shaped neighborhoods. Whenever a patch is calculating something about its fitness, it is the center of the neighborhood. For another patch, when that patch is calculating, it becomes merely one of the neighbors.

2. Each patch is an agent that has a fitness. Each patch is also the location of a lottery for its space. The patch and the four surrounding patches put in "seeds" to try to get the patch turned to their type of patch, altruist or selfish. Being successful in the lottery is getting patches to turn to your type. We're assuming here that the type (altruistic or selfish) is the important genetic trait.

3. Each patch calculates its own fitness using equation: if it is A (altruist): 1 - cost + (Number Altruists in Neighborhood / 5 benefit from Altruists) if it is S (selfish): 1 + (Number Altruists in Neighborhood / 5 benefit from Altruists) Thus, the fitness of the S patch will be higher than the fitness of the A's. If the cost is 0.2 and benefit is 0.5, for an A surrounded by two S's and two A's, then the fitness of this spot is 1 - 0.2 + (3/5 * 0.5) = 1.1.

4. After each patch has calculated its fitness, it looks to its four neighbors. Each of the five patches, including itself, puts a weighted seed into a genetic lottery for this center spot. So, for example, if the neighborhood is ASASA, each of the three A's register their fitness value, and each of the two S's put in their fitness. The A's are added, and the S's are added. Let us assume that the A's add up to 3.2 (this includes the A in the center spot), and the S's add up to 2.6. These two numbers are the altruist weight and selfish weight respectively, in the lottery for the center spot. Now, the larger number, whichever it is, is called the Major seed; it is divided by the sum of all the fitnesses. Thus, 3.2/(3.2 + 2.6) = .552. This number is the Altruism seed in the lottery. The minor seed is 2.6/(3.2 + 2.6) = .448. (Notice that the Altruism seed of the parent is 3/5 = .600, while the child's is .552. Even though altruism is dominating, it is losing ground.)

5. There are a number of ways of doing the lottery itself. Currently, we choose a random number between 0 and 1. Now, if the Number is below the Minor seed, the minor weight gets the spot, and if it is above the major seed, the major seed gets the spot. So, in the example, if the random number is anywhere from .449 to 1, then the Major seed gets it. If it is between 0 and .448, the minor seed gets it.